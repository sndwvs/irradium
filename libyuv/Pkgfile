# Description: Library for YUV scaling
# URL: https://chromium.googlesource.com/libyuv/libyuv/
# Maintainer: mara, mara at fail dot pp dot ua
# Depends on: gcc libjpeg-turbo

name=libyuv
version=20231128
release=1
_commit=464c51a0353c71f08fe45f683d6a97a638d47833
source=(https://chromium.googlesource.com/libyuv/libyuv/+archive/${_commit}.tar.gz)

build(){
  sed -i 's|yuvconvert ${JPEG_LIBRARY}|${ly_lib_shared} ${JPEG_LIBRARY}|' CMakeLists.txt

  cmake -B build \
    -DCMAKE_INSTALL_PREFIX=/usr
  make -C build
  make -C build DESTDIR=$PKG install
}
