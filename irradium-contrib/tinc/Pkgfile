# Description: Virtual Private Network (VPN) daemon
# URL: https://www.tinc-vpn.org
# Maintainer: mara, mara at fail dot pp dot ua
# Depends on: zlib lzo openssl

name=tinc
version=1.0.36
release=2
source=(https://www.tinc-vpn.org/packages/$name-$version.tar.gz
    rc.tincd
    tincd.logrotate)

build() {
  cd $name-$version

  ./configure \
    --prefix=/usr \
    --sysconfdir=/etc \
    --mandir=/usr/share/man \
    --infodir=/usr/share/info \
    --localstatedir=/var \
    --enable-jumbograms \
    --enable-lzo \
    --enable-zlib

  make
  make DESTDIR=$PKG install

  rm -rf $PKG/usr/share/info
  install -Dm644 doc/sample-config/$name.conf $PKG/etc/$name/$name.conf
  install -Dm644 $SRC/tincd.logrotate $PKG/etc/logrotate.d/tincd
  install -m755 -D $SRC/rc.tincd $PKG/etc/rc.d/tincd
}
